<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    <!--	<changeSet id="1" author="flowable">-->
    <!--    -->
    <!--        &lt;!&ndash; model &ndash;&gt;-->
    <!--		<createTable tableName="ACT_DE_MODEL">-->
    <!--			<column name="id" type="varchar(255)">-->
    <!--				<constraints primaryKey="true" nullable="false" />-->
    <!--			</column>-->
    <!--			<column name="name" type="varchar(400)">-->
    <!--				<constraints nullable="false" />-->
    <!--			</column>-->
    <!--			<column name="model_key" type="varchar(400)">-->
    <!--				<constraints nullable="false" />-->
    <!--			</column>-->
    <!--			<column name="description" type="varchar(4000)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="model_comment" type="varchar(4000)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="created" type="datetime(6)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="created_by" type="varchar(255)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="last_updated" type="datetime(6)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="last_updated_by" type="varchar(255)">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="version" type="int">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="model_editor_json" type="longtext">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="thumbnail" type="longblob">-->
    <!--				<constraints nullable="true" />-->
    <!--			</column>-->
    <!--			<column name="model_type" type="int">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--		</createTable>-->

    <!--        <createIndex indexName="idx_proc_mod_created"-->
    <!--            tableName="ACT_DE_MODEL" unique="false">-->
    <!--            <column name="created_by" />-->
    <!--        </createIndex>-->

    <!--        &lt;!&ndash; Model history &ndash;&gt;-->
    <!--        <createTable tableName="ACT_DE_MODEL_HISTORY">-->
    <!--            <column name="id" type="varchar(255)">-->
    <!--                <constraints primaryKey="true" nullable="false" />-->
    <!--            </column>-->
    <!--            <column name="name" type="varchar(400)">-->
    <!--                <constraints nullable="false" />-->
    <!--            </column>-->
    <!--            <column name="model_key" type="varchar(400)">-->
    <!--				<constraints nullable="false" />-->
    <!--			</column>-->
    <!--            <column name="description" type="varchar(4000)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="model_comment" type="varchar(4000)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="created" type="datetime(6)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="created_by" type="varchar(255)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="last_updated" type="datetime(6)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="last_updated_by" type="varchar(255)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="removal_date" type="datetime(6)">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="version" type="int">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="model_editor_json" type="longtext">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--            <column name="model_id" type="varchar(255)">-->
    <!--                <constraints nullable="false" />-->
    <!--            </column>-->
    <!--            <column name="model_type" type="int">-->
    <!--                <constraints nullable="true" />-->
    <!--            </column>-->
    <!--        </createTable>-->

    <!--        <createIndex indexName="idx_proc_mod_history_proc"-->
    <!--            tableName="ACT_DE_MODEL_HISTORY" unique="false">-->
    <!--            <column name="model_id" />-->
    <!--        </createIndex>-->

    <!--		&lt;!&ndash; MODEL RELATION &ndash;&gt;-->

    <!--		 <createTable tableName="ACT_DE_MODEL_RELATION">-->
    <!--		 	<column name="id" type="varchar(255)">-->
    <!--                <constraints primaryKey="true" nullable="false" />-->
    <!--            </column>-->
    <!--            <column name="parent_model_id" type="varchar(255)" />-->
    <!--            <column name="model_id" type="varchar(255)" />-->
    <!--            <column name="relation_type" type="varchar(255)" />-->
    <!--        </createTable>-->

    <!--        <addForeignKeyConstraint baseColumnNames="parent_model_id"-->
    <!--			baseTableName="ACT_DE_MODEL_RELATION" constraintName="fk_relation_parent"-->
    <!--			referencedColumnNames="id" referencedTableName="ACT_DE_MODEL" />-->

    <!--		<addForeignKeyConstraint baseColumnNames="model_id"-->
    <!--			baseTableName="ACT_DE_MODEL_RELATION" constraintName="fk_relation_child"-->
    <!--			referencedColumnNames="id" referencedTableName="ACT_DE_MODEL" />-->

    <!--	</changeSet>-->

    <!--    &lt;!&ndash;-->
    <!--        Bugfix: saving a model multiple times can sometimes give a conflict exception on sql server-->
    <!--        due to the precision storage of the datetime data type. The datetime2 type has a better precision.-->
    <!--    &ndash;&gt;-->
    <!--    <changeSet id="2" author="flowable" dbms="mssql">-->

    <!--        <modifyDataType tableName="ACT_DE_MODEL" columnName="created" newDataType="datetime2" />-->
    <!--        <modifyDataType tableName="ACT_DE_MODEL" columnName="last_updated" newDataType="datetime2" />-->

    <!--        <modifyDataType tableName="ACT_DE_MODEL_HISTORY" columnName="created" newDataType="datetime2" />-->
    <!--        <modifyDataType tableName="ACT_DE_MODEL_HISTORY" columnName="last_updated" newDataType="datetime2" />-->
    <!--        <modifyDataType tableName="ACT_DE_MODEL_HISTORY" columnName="removal_date" newDataType="datetime2" />-->

    <!--    </changeSet>-->

    <!--    <changeSet id="3" author="flowable">-->
    <!--        <addColumn tableName="ACT_DE_MODEL">-->
    <!--            <column  name="tenant_id" type="varchar(255)" />-->
    <!--        </addColumn>-->
    <!--        <addColumn tableName="ACT_DE_MODEL_HISTORY">-->
    <!--            <column  name="tenant_id" type="varchar(255)" />-->
    <!--        </addColumn>-->
    <!--    </changeSet>-->

    <!-- 扫面 所有 Sql文件路径 ，相对路径-->
    <changeSet id="4" author="flowable">
        <sqlFile path="db/sqlfile/v_1.0.0/flowable.mysql.create.extension.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="5" author="flowable">
        <sqlFile path="db/sqlfile/v_1.0.0/flowable.mysql.update.extension-1.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <!-- 新增挂起/激活 和时间 的两个字段-->
    <changeSet id="6" author="flowable">
        <sqlFile path="db/sqlfile/v_4.1.0/flowable.mysql.update.extension-2.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="7" author="flowable">
        <sqlFile path="db/sqlfile/v_4.1.0/flowable.mysql.update.extension-2.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="8" author="flowable">
        <sqlFile path="db/sqlfile/v_4.1.0/flowable.mysql.update.extension-3.sql" relativeToChangelogFile="true"/>
    </changeSet>
</databaseChangeLog>